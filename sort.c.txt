sort.c

#include "sort.h"
#include <string.h>

static int compare_students(const Student *a, const Student *b, SortKey key) {
    switch (key) {
        case SORT_BY_ID:
            return a->id - b->id;
        
        case SORT_BY_NAME:
            return strcmp(a->name, b->name);
        
        case SORT_BY_AVERAGE: {
            double diff = student_average(a) - student_average(b);
            if (diff < 0) return -1;
            if (diff > 0) return 1;
            return 0;
        }
        
        default:
            return 0;
    }
}

void sort_students(Student *students, int count, SortKey key) {
    if (!students || count <= 1) return;
    
    for (int i = 1; i < count; i++) {
        Student temp = students[i];
        int j = i - 1;
        
        while (j >= 0 && compare_students(&students[j], &temp, key) > 0) {
            students[j + 1] = students[j];
            j--;
        }
        
        students[j + 1] = temp;
    }
}